<!DOCTYPE html><html><head><title>粒子连线</title></head><body style="margin:0"><canvas id="canvas"></canvas><script>c=document.getElementById("canvas");c.height=c.width=window.innerWidth;ctx=c.getContext("2d");Math.randomEx=function(min,max){return this.random()*(max-min)+min};Math.abd=(x1,x2,y1,y2)=>{return Math.sqrt((x1-x2)**2+(y1-y2)**2)};point=[];radius=4;while(point.length<100){point[point.length]={endPoint:[],lineAlpha:[],x:Math.randomEx(radius,c.width-radius),y:Math.randomEx(radius,c.height-radius-100),xv:Math.randomEx(-0.5,0.5),yv:Math.randomEx(-0.5,0.5),style:Math.round(Math.randomEx(0,2)),color:(()=>{return"rgba("+Math.round(Math.randomEx(0,255))+","+Math.round(Math.randomEx(0,255))+","+Math.round(Math.randomEx(0,255))+","})()}}particleConnection=()=>{ctx.fillStyle="#000";ctx.fillRect(0,0,c.width,c.height);for(var i=0;i<point.length;i++){ctx.beginPath();ctx.fillStyle=ctx.strokeStyle=point[i].color+"1)";ctx.arc(point[i].x,point[i].y,radius,0,2*Math.PI);switch(point[i].style){case 0:ctx.fill();ctx.beginPath();ctx.arc(point[i].x,point[i].y,radius+3,0,2*Math.PI);ctx.stroke();break;case 1:ctx.fill();break;case 2:ctx.stroke()}for(var j=0;j<point.length;j++){if(Math.abd(point[i].x,point[j].x,point[i].y,point[j].y)<130&&!point[j].endPoint.includes(i)&&!point[i].endPoint.includes(j)){point[i].endPoint.push(j);point[i].lineAlpha.push(0)}}point[i].endPoint.forEach((p,j)=>{ctx.beginPath();ctx.strokeStyle=point[i].color+point[i].lineAlpha[j]+")";ctx.moveTo(point[i].x,point[i].y);ctx.lineTo(point[p].x,point[p].y);ctx.stroke();if(Math.abd(point[i].x,point[p].x,point[i].y,point[p].y)>130){point[i].lineAlpha[j]-=0.0166}else if(point[i].lineAlpha[j]<1){point[i].lineAlpha[j]+=0.0166;if(point[i].lineAlpha[j]>1)point[i].lineAlpha[j]=1}});point[i].lineAlpha.forEach((a,j)=>{if(a<=0){point[i].endPoint.splice(j,1);point[i].lineAlpha.splice(j,1)}});point[i].x+=point[i].xv;point[i].y+=point[i].yv;if(point[i].x>c.width||point[i].x<0)point[i].xv=-point[i].xv;if(point[i].y>c.height||point[i].y<0)point[i].yv=-point[i].yv}requestAnimationFrame(particleConnection)};particleConnection();</script></body></html>